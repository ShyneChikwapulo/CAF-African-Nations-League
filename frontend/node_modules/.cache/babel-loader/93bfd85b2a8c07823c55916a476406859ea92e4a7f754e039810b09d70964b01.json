{"ast":null,"code":"// frontend/src/App.tsx - Updated with authentication\nimport React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import'./App.css';import Header from'./components/Header';import Home from'./pages/Home';import Tournament from'./pages/Tournament';import TeamRegistration from'./pages/TeamRegistration';import AdminPanel from'./pages/AdminPanel';import MatchDetails from'./pages/MatchDetails';import TeamDashboard from'./pages/TeamDashboard';import Auth from'./pages/Auth';import{authAPI}from'./services/api';import WinnerScreen from'./pages/WinnerScreen';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[currentUser,setCurrentUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{checkAuth();},[]);const checkAuth=async()=>{const token=localStorage.getItem('token');if(token){try{const response=await authAPI.getMe();setCurrentUser(response.data);}catch(error){// Token is invalid, clear it\nlocalStorage.removeItem('token');localStorage.removeItem('userRole');}}setLoading(false);};const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('userRole');setCurrentUser(null);window.location.href='/';};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xl\",children:\"Loading...\"})});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Header,{currentUser:currentUser,onLogout:handleLogout}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{currentUser:currentUser})}),/*#__PURE__*/_jsx(Route,{path:\"/tournament\",element:/*#__PURE__*/_jsx(Tournament,{})}),/*#__PURE__*/_jsx(Route,{path:\"/auth\",element:!currentUser?/*#__PURE__*/_jsx(Auth,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:!currentUser?/*#__PURE__*/_jsx(TeamRegistration,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:(currentUser===null||currentUser===void 0?void 0:currentUser.role)==='admin'?/*#__PURE__*/_jsx(AdminPanel,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/auth\"})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:(currentUser===null||currentUser===void 0?void 0:currentUser.role)==='representative'?/*#__PURE__*/_jsx(TeamDashboard,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/auth\"})}),/*#__PURE__*/_jsx(Route,{path:\"/match/:id\",element:/*#__PURE__*/_jsx(MatchDetails,{})}),/*#__PURE__*/_jsx(Route,{path:\"/winner\",element:/*#__PURE__*/_jsx(WinnerScreen,{})})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Header","Home","Tournament","TeamRegistration","AdminPanel","MatchDetails","TeamDashboard","Auth","authAPI","WinnerScreen","jsx","_jsx","jsxs","_jsxs","App","currentUser","setCurrentUser","loading","setLoading","checkAuth","token","localStorage","getItem","response","getMe","data","error","removeItem","handleLogout","window","location","href","className","children","onLogout","path","element","to","role"],"sources":["/Users/shine/Downloads/african-nations-league/frontend/src/App.tsx"],"sourcesContent":["// frontend/src/App.tsx - Updated with authentication\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport './App.css';\nimport Header from './components/Header';\nimport Home from './pages/Home';\nimport Tournament from './pages/Tournament';\nimport TeamRegistration from './pages/TeamRegistration';\nimport AdminPanel from './pages/AdminPanel';\nimport MatchDetails from './pages/MatchDetails';\nimport TeamDashboard from './pages/TeamDashboard';\nimport Auth from './pages/Auth';\nimport { authAPI } from './services/api';\nimport WinnerScreen from './pages/WinnerScreen';\n\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    checkAuth();\n  }, []);\n\n  const checkAuth = async () => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      try {\n        const response = await authAPI.getMe();\n        setCurrentUser(response.data);\n      } catch (error) {\n        // Token is invalid, clear it\n        localStorage.removeItem('token');\n        localStorage.removeItem('userRole');\n      }\n    }\n    setLoading(false);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('userRole');\n    setCurrentUser(null);\n    window.location.href = '/';\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-screen\">\n        <div className=\"text-xl\">Loading...</div>\n      </div>\n    );\n  }\n\n  return (\n\n      <Router>\n        <div className=\"min-h-screen bg-gray-100\">\n          <Header currentUser={currentUser} onLogout={handleLogout} />\n          <Routes>\n            <Route path=\"/\" element={<Home currentUser={currentUser} />} />\n            <Route path=\"/tournament\" element={<Tournament />} />\n            <Route path=\"/auth\" element={!currentUser ? <Auth /> : <Navigate to=\"/\" />} />\n            <Route \n              path=\"/register\" \n              element={\n                !currentUser ? <TeamRegistration /> : <Navigate to=\"/\" />\n              } \n            />\n            <Route \n              path=\"/admin\" \n              element={\n                currentUser?.role === 'admin' ? <AdminPanel /> : <Navigate to=\"/auth\" />\n              } \n            />\n            <Route \n              path=\"/dashboard\" \n              element={\n                currentUser?.role === 'representative' ? <TeamDashboard /> : <Navigate to=\"/auth\" />\n              } \n            />\n            <Route path=\"/match/:id\" element={<MatchDetails />} />\n            <Route path=\"/winner\" element={<WinnerScreen />} />\n          </Routes>\n        </div>\n      </Router>\n\n  );\n}\n\nexport default App;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,aAAa,GAAI,CAAAC,MAAM,CAAEC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,KAAQ,kBAAkB,CACnF,MAAO,WAAW,CAClB,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,IAAI,KAAM,cAAc,CAC/B,MAAO,CAAAC,UAAU,KAAM,oBAAoB,CAC3C,MAAO,CAAAC,gBAAgB,KAAM,0BAA0B,CACvD,MAAO,CAAAC,UAAU,KAAM,oBAAoB,CAC3C,MAAO,CAAAC,YAAY,KAAM,sBAAsB,CAC/C,MAAO,CAAAC,aAAa,KAAM,uBAAuB,CACjD,MAAO,CAAAC,IAAI,KAAM,cAAc,CAC/B,OAASC,OAAO,KAAQ,gBAAgB,CACxC,MAAO,CAAAC,YAAY,KAAM,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAGhD,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGvB,QAAQ,CAAM,IAAI,CAAC,CACzD,KAAM,CAACwB,OAAO,CAAEC,UAAU,CAAC,CAAGzB,QAAQ,CAAC,IAAI,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACdyB,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACT,GAAI,CACF,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAf,OAAO,CAACgB,KAAK,CAAC,CAAC,CACtCR,cAAc,CAACO,QAAQ,CAACE,IAAI,CAAC,CAC/B,CAAE,MAAOC,KAAK,CAAE,CACd;AACAL,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC,CAChCN,YAAY,CAACM,UAAU,CAAC,UAAU,CAAC,CACrC,CACF,CACAT,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAED,KAAM,CAAAU,YAAY,CAAGA,CAAA,GAAM,CACzBP,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC,CAChCN,YAAY,CAACM,UAAU,CAAC,UAAU,CAAC,CACnCX,cAAc,CAAC,IAAI,CAAC,CACpBa,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,GAAG,CAC5B,CAAC,CAED,GAAId,OAAO,CAAE,CACX,mBACEN,IAAA,QAAKqB,SAAS,CAAC,2CAA2C,CAAAC,QAAA,cACxDtB,IAAA,QAAKqB,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,YAAU,CAAK,CAAC,CACtC,CAAC,CAEV,CAEA,mBAEItB,IAAA,CAACf,MAAM,EAAAqC,QAAA,cACLpB,KAAA,QAAKmB,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCtB,IAAA,CAACX,MAAM,EAACe,WAAW,CAAEA,WAAY,CAACmB,QAAQ,CAAEN,YAAa,CAAE,CAAC,cAC5Df,KAAA,CAAChB,MAAM,EAAAoC,QAAA,eACLtB,IAAA,CAACb,KAAK,EAACqC,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEzB,IAAA,CAACV,IAAI,EAACc,WAAW,CAAEA,WAAY,CAAE,CAAE,CAAE,CAAC,cAC/DJ,IAAA,CAACb,KAAK,EAACqC,IAAI,CAAC,aAAa,CAACC,OAAO,cAAEzB,IAAA,CAACT,UAAU,GAAE,CAAE,CAAE,CAAC,cACrDS,IAAA,CAACb,KAAK,EAACqC,IAAI,CAAC,OAAO,CAACC,OAAO,CAAE,CAACrB,WAAW,cAAGJ,IAAA,CAACJ,IAAI,GAAE,CAAC,cAAGI,IAAA,CAACZ,QAAQ,EAACsC,EAAE,CAAC,GAAG,CAAE,CAAE,CAAE,CAAC,cAC9E1B,IAAA,CAACb,KAAK,EACJqC,IAAI,CAAC,WAAW,CAChBC,OAAO,CACL,CAACrB,WAAW,cAAGJ,IAAA,CAACR,gBAAgB,GAAE,CAAC,cAAGQ,IAAA,CAACZ,QAAQ,EAACsC,EAAE,CAAC,GAAG,CAAE,CACzD,CACF,CAAC,cACF1B,IAAA,CAACb,KAAK,EACJqC,IAAI,CAAC,QAAQ,CACbC,OAAO,CACL,CAAArB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEuB,IAAI,IAAK,OAAO,cAAG3B,IAAA,CAACP,UAAU,GAAE,CAAC,cAAGO,IAAA,CAACZ,QAAQ,EAACsC,EAAE,CAAC,OAAO,CAAE,CACxE,CACF,CAAC,cACF1B,IAAA,CAACb,KAAK,EACJqC,IAAI,CAAC,YAAY,CACjBC,OAAO,CACL,CAAArB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEuB,IAAI,IAAK,gBAAgB,cAAG3B,IAAA,CAACL,aAAa,GAAE,CAAC,cAAGK,IAAA,CAACZ,QAAQ,EAACsC,EAAE,CAAC,OAAO,CAAE,CACpF,CACF,CAAC,cACF1B,IAAA,CAACb,KAAK,EAACqC,IAAI,CAAC,YAAY,CAACC,OAAO,cAAEzB,IAAA,CAACN,YAAY,GAAE,CAAE,CAAE,CAAC,cACtDM,IAAA,CAACb,KAAK,EAACqC,IAAI,CAAC,SAAS,CAACC,OAAO,cAAEzB,IAAA,CAACF,YAAY,GAAE,CAAE,CAAE,CAAC,EAC7C,CAAC,EACN,CAAC,CACA,CAAC,CAGf,CAEA,cAAe,CAAAK,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}