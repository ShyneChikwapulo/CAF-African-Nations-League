{"ast":null,"code":"import OpenAI from 'openai';\nconst openai = new OpenAI({\n  baseURL: 'https://openrouter.ai/api/v1',\n  apiKey: process.env.OPENROUTER_API_KEY || '',\n  // fallback if not in env\n  defaultHeaders: {\n    'HTTP-Referer': 'http://localhost:5000',\n    'X-Title': 'African Nations League Backend'\n  }\n});\nexport const generateMatchCommentary = async (teamA, teamB, matchEvents) => {\n  try {\n    var _response$choices$, _response$choices$$me;\n    const prompt = `\nGenerate realistic football match commentary for a match between ${teamA} and ${teamB} in the African Nations League.\n\nKey match events:\n${matchEvents.join('\\n')}\n\nReturn the commentary as a JSON array of strings with minute markers.\nExample: [\"1': The match kicks off...\", \"23': GOAL! Amazing strike...\"]\n`;\n    const response = await openai.chat.completions.create({\n      model: 'openai/gpt-4o',\n      messages: [{\n        role: 'user',\n        content: prompt\n      }],\n      temperature: 0.8,\n      max_tokens: 2000\n    });\n    let commentaryText = ((_response$choices$ = response.choices[0]) === null || _response$choices$ === void 0 ? void 0 : (_response$choices$$me = _response$choices$.message) === null || _response$choices$$me === void 0 ? void 0 : _response$choices$$me.content) || '';\n\n    // Remove Markdown code fences if present\n    commentaryText = commentaryText.replace(/```json|```/g, '').trim();\n    try {\n      const commentary = JSON.parse(commentaryText);\n      return Array.isArray(commentary) ? commentary : [commentaryText];\n    } catch {\n      // fallback: split by lines\n      return commentaryText.split('\\n').filter(line => line.trim());\n    }\n  } catch (error) {\n    console.error('Error generating commentary:', error);\n    return [\"The match kicks off in this exciting African Nations League encounter!\", \"Both teams are showing great spirit and determination.\", \"The crowd is electric, creating an amazing atmosphere!\"];\n  }\n};","map":{"version":3,"names":["OpenAI","openai","baseURL","apiKey","process","env","OPENROUTER_API_KEY","defaultHeaders","generateMatchCommentary","teamA","teamB","matchEvents","_response$choices$","_response$choices$$me","prompt","join","response","chat","completions","create","model","messages","role","content","temperature","max_tokens","commentaryText","choices","message","replace","trim","commentary","JSON","parse","Array","isArray","split","filter","line","error","console"],"sources":["/Users/shine/Downloads/african-nations-league/frontend/src/pages/MatchDetails.tsx"],"sourcesContent":["import OpenAI from 'openai';\n\nconst openai = new OpenAI({\n  baseURL: 'https://openrouter.ai/api/v1',\n  apiKey: process.env.OPENROUTER_API_KEY || '', // fallback if not in env\n  defaultHeaders: {\n    'HTTP-Referer': 'http://localhost:5000',\n    'X-Title': 'African Nations League Backend',\n  },\n});\n\nexport const generateMatchCommentary = async (\n  teamA: string,\n  teamB: string,\n  matchEvents: string[]\n): Promise<string[]> => {\n  try {\n    const prompt = `\nGenerate realistic football match commentary for a match between ${teamA} and ${teamB} in the African Nations League.\n\nKey match events:\n${matchEvents.join('\\n')}\n\nReturn the commentary as a JSON array of strings with minute markers.\nExample: [\"1': The match kicks off...\", \"23': GOAL! Amazing strike...\"]\n`;\n\n    const response = await openai.chat.completions.create({\n      model: 'openai/gpt-4o',\n      messages: [{ role: 'user', content: prompt }],\n      temperature: 0.8,\n      max_tokens: 2000,\n    });\n\n    let commentaryText = response.choices[0]?.message?.content || '';\n\n    // Remove Markdown code fences if present\n    commentaryText = commentaryText.replace(/```json|```/g, '').trim();\n\n    try {\n      const commentary = JSON.parse(commentaryText);\n      return Array.isArray(commentary) ? commentary : [commentaryText];\n    } catch {\n      // fallback: split by lines\n      return commentaryText.split('\\n').filter(line => line.trim());\n    }\n  } catch (error) {\n    console.error('Error generating commentary:', error);\n    return [\n      \"The match kicks off in this exciting African Nations League encounter!\",\n      \"Both teams are showing great spirit and determination.\",\n      \"The crowd is electric, creating an amazing atmosphere!\"\n    ];\n  }\n};\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,QAAQ;AAE3B,MAAMC,MAAM,GAAG,IAAID,MAAM,CAAC;EACxBE,OAAO,EAAE,8BAA8B;EACvCC,MAAM,EAAEC,OAAO,CAACC,GAAG,CAACC,kBAAkB,IAAI,EAAE;EAAE;EAC9CC,cAAc,EAAE;IACd,cAAc,EAAE,uBAAuB;IACvC,SAAS,EAAE;EACb;AACF,CAAC,CAAC;AAEF,OAAO,MAAMC,uBAAuB,GAAG,MAAAA,CACrCC,KAAa,EACbC,KAAa,EACbC,WAAqB,KACC;EACtB,IAAI;IAAA,IAAAC,kBAAA,EAAAC,qBAAA;IACF,MAAMC,MAAM,GAAG;AACnB,mEAAmEL,KAAK,QAAQC,KAAK;AACrF;AACA;AACA,EAAEC,WAAW,CAACI,IAAI,CAAC,IAAI,CAAC;AACxB;AACA;AACA;AACA,CAAC;IAEG,MAAMC,QAAQ,GAAG,MAAMf,MAAM,CAACgB,IAAI,CAACC,WAAW,CAACC,MAAM,CAAC;MACpDC,KAAK,EAAE,eAAe;MACtBC,QAAQ,EAAE,CAAC;QAAEC,IAAI,EAAE,MAAM;QAAEC,OAAO,EAAET;MAAO,CAAC,CAAC;MAC7CU,WAAW,EAAE,GAAG;MAChBC,UAAU,EAAE;IACd,CAAC,CAAC;IAEF,IAAIC,cAAc,GAAG,EAAAd,kBAAA,GAAAI,QAAQ,CAACW,OAAO,CAAC,CAAC,CAAC,cAAAf,kBAAA,wBAAAC,qBAAA,GAAnBD,kBAAA,CAAqBgB,OAAO,cAAAf,qBAAA,uBAA5BA,qBAAA,CAA8BU,OAAO,KAAI,EAAE;;IAEhE;IACAG,cAAc,GAAGA,cAAc,CAACG,OAAO,CAAC,cAAc,EAAE,EAAE,CAAC,CAACC,IAAI,CAAC,CAAC;IAElE,IAAI;MACF,MAAMC,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACP,cAAc,CAAC;MAC7C,OAAOQ,KAAK,CAACC,OAAO,CAACJ,UAAU,CAAC,GAAGA,UAAU,GAAG,CAACL,cAAc,CAAC;IAClE,CAAC,CAAC,MAAM;MACN;MACA,OAAOA,cAAc,CAACU,KAAK,CAAC,IAAI,CAAC,CAACC,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACR,IAAI,CAAC,CAAC,CAAC;IAC/D;EACF,CAAC,CAAC,OAAOS,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;IACpD,OAAO,CACL,wEAAwE,EACxE,wDAAwD,EACxD,wDAAwD,CACzD;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}